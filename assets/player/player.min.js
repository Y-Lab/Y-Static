!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Player",[],t):"object"==typeof exports?exports.Player=t():e.Player=t()}(window,function(){return function(n){var i={};function a(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}return a.m=n,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=5)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=/mobile/i.test(window.navigator.userAgent),a={secondToTime:function(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),i=Math.floor(e-3600*t-60*n);return(0<t?[t,n,i]:[n,i]).map(function(e){return e<10?"0"+e:""+e}).join(":")},getElementViewLeft:function(e){var t=e.offsetLeft,n=e.offsetParent,i=document.body.scrollLeft+document.documentElement.scrollLeft;if(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)for(;null!==n&&n!==e;)t+=n.offsetLeft,n=n.offsetParent;else for(;null!==n;)t+=n.offsetLeft,n=n.offsetParent;return t-i},getBoundingClientRectViewLeft:function(e){var t=document.documentElement.scrollTop;if(e.getBoundingClientRect){if("number"!=typeof this.getBoundingClientRectViewLeft.offset){var n=document.createElement("div");n.style.cssText="position:absolute;top:0;left:0;",document.body.appendChild(n),this.getBoundingClientRectViewLeft.offset=-n.getBoundingClientRect().top-t,document.body.removeChild(n),n=null}var i=e.getBoundingClientRect(),a=this.getBoundingClientRectViewLeft.offset;return i.left+a}return this.getElementViewLeft(e)},getScrollPosition:function(){return{left:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}},setScrollPosition:function(e){var t=e.left,n=void 0===t?0:t,i=e.top,a=void 0===i?0:i;this.isFirefox?(document.documentElement.scrollLeft=n,document.documentElement.scrollTop=a):window.scrollTo(n,a)},isMobile:i,isFirefox:/firefox/i.test(window.navigator.userAgent),isChrome:/chrome/i.test(window.navigator.userAgent),storage:{set:function(e,t){localStorage.setItem(e,t)},get:function(e){return localStorage.getItem(e)}},cumulativeOffset:function(e){for(var t=0,n=0;t+=e.offsetTop||0,n+=e.offsetLeft||0,e=e.offsetParent;);return{top:t,left:n}},nameMap:{dragStart:i?"touchstart":"mousedown",dragMove:i?"touchmove":"mousemove",dragEnd:i?"touchend":"mouseup"}};t.default=a},function(e,t,n){"use strict";var i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":a(window))&&(i=window)}e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=y(n(18)),a=y(n(19)),r=y(n(20)),o=y(n(21)),l=y(n(22)),s=y(n(23)),c=y(n(24)),u=y(n(25)),d=y(n(26)),p=y(n(27));function y(e){return e&&e.__esModule?e:{default:e}}var f={play:i.default,pause:a.default,volumeUp:r.default,volumeDown:o.default,volumeOff:l.default,theaterMode:s.default,defaultView:c.default,fullScreen:u.default,exitFullScreen:d.default,loading:p.default};t.default=f},function(e,t,n){"use strict";e.exports=n(29)},function(e,t,n){var l=n(3);e.exports=function(e){"use strict";var t="",n=(e=e||{}).current,i=e.pic,a=l.$escape,r=e.preload,o=e.url;return t+='<video class="y-player-video',n&&(t+=" y-player-video-current"),t+='" webkit-playsinline playsinline',i&&(t+=' poster="',t+=a(i),t+='"'),r&&(t+=' preload="',t+=a(r),t+='"'),o&&(t+=' src="',t+=a(o),t+='"'),t+="></video>"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(6);var i,a=n(9),r=(i=a)&&i.__esModule?i:{default:i};console.log("\n %c Y-Player v1.0.0 711da65 %c https://player.y-english.org \n\n","color: #54C8FF; background: #2185D0; padding:5px 0;","background: #54C8FF; padding:5px 0;"),t.default=r.default},function(e,t,n){},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=k(n(10)),r=k(n(0)),o=k(n(15)),l=k(n(16)),s=k(n(17)),c=k(n(2)),u=k(n(31)),d=k(n(32)),p=k(n(33)),y=k(n(34)),f=k(n(35)),h=k(n(36)),v=k(n(38)),m=k(n(39)),g=k(n(40)),b=k(n(41)),w=k(n(4));function k(e){return e&&e.__esModule?e:{default:e}}var T=0,x=[],L=function(){function n(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.options=(0,o.default)(e),this.options.video.quality&&(this.qualityIndex=this.options.video.defaultQuality,this.quality=this.options.video.quality[this.options.video.defaultQuality]),this.tran=new l.default(this.options.lang).tran,this.events=new u.default,this.user=new d.default(this),this.container=this.options.container,this.container.classList.add("y-player"),r.default.isMobile&&this.container.classList.add("y-player-mobile"),this.arrow=this.container.offsetWidth<=500,this.arrow&&this.container.classList.add("y-player-arrow"),this.template=new s.default({container:this.container,options:this.options,index:T,tran:this.tran}),this.video=this.template.video,this.bar=new p.default(this.template),this.bezel=new y.default(this.template.bezel),this.fullScreen=new f.default(this),this.controller=new h.default(this),document.addEventListener("click",function(){t.focus=!1},!0),this.container.addEventListener("click",function(){t.focus=!0},!0),this.paused=!0,this.timer=new v.default(this),this.hotkey=new m.default(this),this.contextmenu=new g.default(this),this.initVideo(this.video,this.quality&&this.quality.type||this.options.video.type),this.infoPanel=new b.default(this),this.options.autoplay&&this.play(),T++,x.push(this)}return i(n,[{key:"seek",value:function(e){e=Math.max(e,0),this.video.duration&&(e=Math.min(e,this.video.duration)),this.video.currentTime<e?this.notice(this.tran("FF")+" "+(e-this.video.currentTime).toFixed(0)+" "+this.tran("s")):this.video.currentTime>e&&this.notice(this.tran("REW")+" "+(this.video.currentTime-e).toFixed(0)+" "+this.tran("s")),this.video.currentTime=e,this.bar.set("played",e/this.video.duration,"width"),this.template.ptime.innerHTML=r.default.secondToTime(e)}},{key:"play",value:function(){var e=this;if(this.paused=!1,this.video.paused&&this.bezel.switch(c.default.play),this.template.playButton.innerHTML=c.default.pause,a.default.resolve(this.video.play()).catch(function(){e.pause()}).then(function(){}),this.timer.enable("loading"),this.container.classList.remove("y-player-paused"),this.container.classList.add("y-player-playing"),this.options.mutex)for(var t=0;t<x.length;t++)this!==x[t]&&x[t].pause()}},{key:"pause",value:function(){this.paused=!0,this.container.classList.remove("y-player-loading"),this.video.paused||this.bezel.switch(c.default.pause),this.template.playButton.innerHTML=c.default.play,this.video.pause(),this.timer.disable("loading"),this.container.classList.remove("y-player-playing"),this.container.classList.add("y-player-paused")}},{key:"switchVolumeIcon",value:function(){.95<=this.volume()?this.template.volumeIcon.innerHTML=c.default.volumeUp:0<this.volume()?this.template.volumeIcon.innerHTML=c.default.volumeDown:this.template.volumeIcon.innerHTML=c.default.volumeOff}},{key:"volume",value:function(e,t,n){if(e=parseFloat(e),!isNaN(e)){e=Math.max(e,0),e=Math.min(e,1),this.bar.set("volume",e,"width");var i=(100*e).toFixed(0)+"%";this.template.volumeBarWrapWrap.dataset.balloon=i,t||this.user.set("volume",e),n||this.notice(this.tran("Volume")+" "+(100*e).toFixed(0)+"%"),this.video.volume=e,this.video.muted&&(this.video.muted=!1),this.switchVolumeIcon()}return this.video.volume}},{key:"toggle",value:function(){this.video.paused?this.play():this.pause()}},{key:"on",value:function(e,t){this.events.on(e,t)}},{key:"switchVideo",value:function(e){this.pause(),this.video.poster=e.pic?e.pic:"",this.video.src=e.url,this.initMSE(this.video,e.type||"auto")}},{key:"initMSE",value:function(e,t){var n=this;if(this.type=t,this.options.video.customType&&this.options.video.customType[t])"[object Function]"===Object.prototype.toString.call(this.options.video.customType[t])?this.options.video.customType[t](this.video,this):console.error("Illegal video type: "+t);else switch("auto"===this.type&&(/m3u8(#|\?|$)/i.exec(e.src)?this.type="hls":/.flv(#|\?|$)/i.exec(e.src)?this.type="flv":/.mpd(#|\?|$)/i.exec(e.src)?this.type="dash":this.type="normal"),"hls"===this.type&&(e.canPlayType("application/x-mpegURL")||e.canPlayType("application/vnd.apple.mpegURL"))&&(this.type="normal"),this.type){case"hls":if(Hls)if(Hls.isSupported()){var i=new Hls;i.loadSource(e.src),i.attachMedia(e)}else this.notice("Error: Hls is not supported.");else this.notice("Error: Can't find Hls.");break;case"flv":if(flvjs&&flvjs.isSupported())if(flvjs.isSupported()){var a=flvjs.createPlayer({type:"flv",url:e.src});a.attachMediaElement(e),a.load()}else this.notice("Error: flvjs is not supported.");else this.notice("Error: Can't find flvjs.");break;case"dash":dashjs?dashjs.MediaPlayer().create().initialize(e,e.src,!1):this.notice("Error: Can't find dashjs.");break;case"webtorrent":if(WebTorrent)if(WebTorrent.WEBRTC_SUPPORT){this.container.classList.add("y-player-loading");var r=new WebTorrent,o=e.src;r.add(o,function(e){e.files.find(function(e){return e.name.endsWith(".mp4")}).renderTo(n.video,{autoplay:n.options.autoplay},function(){n.container.classList.remove("y-player-loading")})})}else this.notice("Error: Webtorrent is not supported.");else this.notice("Error: Can't find Webtorrent.")}}},{key:"initVideo",value:function(t,e){var n=this;this.initMSE(t,e),this.on("durationchange",function(){1!==t.duration&&t.duration!==1/0&&(n.template.dtime.innerHTML=r.default.secondToTime(t.duration))}),this.on("progress",function(){var e=t.buffered.length?t.buffered.end(t.buffered.length-1)/t.duration:0;n.bar.set("loaded",e,"width")}),this.on("error",function(){n.video.error&&n.tran&&n.notice&&(n.type,n.notice(n.tran("Video load failed"),-1))}),this.on("ended",function(){n.bar.set("played",1,"width"),n.pause()}),this.on("play",function(){n.paused&&n.play()}),this.on("pause",function(){n.paused||n.pause()}),this.on("timeupdate",function(){n.bar.set("played",n.video.currentTime/n.video.duration,"width");var e=r.default.secondToTime(n.video.currentTime);n.template.ptime.innerHTML!==e&&(n.template.ptime.innerHTML=e)});for(var i=function(e){t.addEventListener(n.events.videoEvents[e],function(){n.events.trigger(n.events.videoEvents[e])})},a=0;a<this.events.videoEvents.length;a++)i(a);this.volume(this.user.get("volume"),!0,!0)}},{key:"switchQuality",value:function(e){var t=this;if(this.qualityIndex!==e&&!this.switchingQuality){this.qualityIndex=e,this.switchingQuality=!0,this.quality=this.options.video.quality[e],this.template.qualityButton.innerHTML=this.quality.name;var n=this.video.paused;this.video.pause();var i=(0,w.default)({current:!1,pic:null,preload:"auto",url:this.quality.url}),a=(new DOMParser).parseFromString(i,"text/html").body.firstChild;this.template.videoWrap.insertBefore(a,this.template.videoWrap.getElementsByTagName("div")[0]),this.prevVideo=this.video,this.video=a,this.initVideo(this.video,this.quality.type||this.options.video.type),this.seek(this.prevVideo.currentTime),this.notice(this.tran("Switching to")+" "+this.quality.name+" "+this.tran("quality"),-1),this.events.trigger("quality_start",this.quality),this.on("canplay",function(){if(t.prevVideo){if(t.video.currentTime!==t.prevVideo.currentTime)return void t.seek(t.prevVideo.currentTime);t.template.videoWrap.removeChild(t.prevVideo),t.video.classList.add("y-player-video-current"),n||t.video.play(),t.prevVideo=null,t.notice(t.tran("Switched to")+" "+t.quality.name+" "+t.tran("quality")),t.switchingQuality=!1,t.events.trigger("quality_end")}})}}},{key:"notice",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2e3,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:.8;this.template.notice.innerHTML=e,this.template.notice.style.opacity=i,this.noticeTime&&clearTimeout(this.noticeTime),this.events.trigger("notice_show",e),0<n&&(this.noticeTime=setTimeout(function(){t.template.notice.style.opacity=0,t.events.trigger("notice_hide")},n))}},{key:"resize",value:function(){this.events.trigger("resize")}},{key:"speed",value:function(e){this.video.playbackRate=e,this.template.speedButton.innerHTML=e+"&times;"}},{key:"destroy",value:function(){x.splice(x.indexOf(this),1),this.pause(),this.controller.destroy(),this.timer.destroy(),this.video.src="",this.container.innerHTML="",this.events.trigger("destroy")}}],[{key:"version",get:function(){return"1.0.0"}}]),n}();t.default=L},function(e,f,h){"use strict";(function(t){Object.defineProperty(f,"__esModule",{value:!0});var e,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=h(14),i=(e=n)&&e.__esModule?e:{default:e};var a=setTimeout;function r(){}function o(e){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],y(e,this)}function l(n,i){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,o._immediateFn(function(){var e=1===n._state?i.onFulfilled:i.onRejected;if(null!==e){var t;try{t=e(n._value)}catch(e){return void u(i.promise,e)}c(i.promise,t)}else(1===n._state?c:u)(i.promise,n._value)})):n._deferreds.push(i)}function c(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===(void 0===e?"undefined":s(e))||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void d(t);if("function"==typeof n)return void y((i=n,a=e,function(){i.apply(a,arguments)}),t)}t._state=1,t._value=e,d(t)}catch(e){u(t,e)}var i,a}function u(e,t){e._state=2,e._value=t,d(e)}function d(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)l(e,e._deferreds[t]);e._deferreds=null}function p(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function y(e,t){var n=!1;try{e(function(e){n||(n=!0,c(t,e))},function(e){n||(n=!0,u(t,e))})}catch(e){if(n)return;n=!0,u(t,e)}}o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var n=new this.constructor(r);return l(this,new p(e,t,n)),n},o.prototype.finally=i.default,o.all=function(t){return new o(function(i,a){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return i([]);var o=r.length;function l(t,e){try{if(e&&("object"===(void 0===e?"undefined":s(e))||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void n.call(e,function(e){l(t,e)},a)}r[t]=e,0==--o&&i(r)}catch(e){a(e)}}for(var e=0;e<r.length;e++)l(e,r[e])})},o.resolve=function(t){return t&&"object"===(void 0===t?"undefined":s(t))&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(n){return new o(function(e,t){t(n)})},o.race=function(a){return new o(function(e,t){for(var n=0,i=a.length;n<i;n++)a[n].then(e,t)})},o._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){a(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},f.default=o}).call(this,h(11).setImmediate)},function(e,a,r){"use strict";(function(e){var t=void 0!==e&&e||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}a.setTimeout=function(){return new i(n.call(setTimeout,t,arguments),clearTimeout)},a.setInterval=function(){return new i(n.call(setInterval,t,arguments),clearInterval)},a.clearTimeout=a.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(t,this._id)},a.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},a.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},a._unrefActive=a.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(12),a.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||void 0,a.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||void 0}).call(this,r(1))},function(e,t,n){"use strict";(function(e,f){!function(n,i){if(!n.setImmediate){var a,r,t,o,e,l=1,s={},c=!1,u=n.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(n);d=d&&d.setTimeout?d:n,a="[object process]"==={}.toString.call(n.process)?function(e){f.nextTick(function(){y(e)})}:function(){if(n.postMessage&&!n.importScripts){var e=!0,t=n.onmessage;return n.onmessage=function(){e=!1},n.postMessage("","*"),n.onmessage=t,e}}()?(o="setImmediate$"+Math.random()+"$",e=function(e){e.source===n&&"string"==typeof e.data&&0===e.data.indexOf(o)&&y(+e.data.slice(o.length))},n.addEventListener?n.addEventListener("message",e,!1):n.attachEvent("onmessage",e),function(e){n.postMessage(o+e,"*")}):n.MessageChannel?((t=new MessageChannel).port1.onmessage=function(e){y(e.data)},function(e){t.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(r=u.documentElement,function(e){var t=u.createElement("script");t.onreadystatechange=function(){y(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):function(e){setTimeout(y,0,e)},d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return s[l]=i,a(l),l++},d.clearImmediate=p}function p(e){delete s[e]}function y(e){if(c)setTimeout(y,0,e);else{var t=s[e];if(t){c=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(i,n)}}(t)}finally{p(e),c=!1}}}}}("undefined"==typeof self?void 0===e?void 0:e:self)}).call(this,n(1),n(13))},function(e,t,n){"use strict";var i,a,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function s(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(e){i=o}try{a="function"==typeof clearTimeout?clearTimeout:l}catch(e){a=l}}();var c,u=[],d=!1,p=-1;function y(){d&&c&&(d=!1,c.length?u=c.concat(u):p=-1,u.length&&f())}function f(){if(!d){var e=s(y);d=!0;for(var t=u.length;t;){for(c=u,u=[];++p<t;)c&&c[p].run();p=-1,t=u.length}c=null,d=!1,function(t){if(a===clearTimeout)return clearTimeout(t);if((a===l||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(t);try{a(t)}catch(e){try{return a.call(null,t)}catch(e){return a.call(this,t)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function v(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||d||s(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t){var n=this.constructor;return this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){return n.reject(e)})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={container:e.element||document.getElementsByClassName("y-player")[0],autoplay:!1,theme:{bar:"#F00",volume:"#FFF"},lang:(navigator.language||navigator.browserLanguage).toLowerCase(),hotkey:!0,preload:"metadata",volume:.5,speed:[.5,.75,1,1.25,1.5,2],video:{},contextmenu:[],mutex:!0};for(var n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n]);return e.video&&!e.video.type&&(e.video.type="auto"),e.video.quality&&(e.video.url=e.video.quality[e.video.defaultQuality].url),e.lang&&(e.lang=e.lang.toLowerCase()),e.contextmenu=e.contextmenu.concat([{text:"Video info",click:function(e){e.infoPanel.trigger()}},{text:"About author",link:"https://lab.y-english.org"},{text:"Y-Player v1.0.0",link:"https://github.com/Y-Lab/Y-Player"}]),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={"zh-cn":{"About author":"关于作者","Y-Player feedback":"Y-Player意见反馈","About Y-Player":"关于Y-Player",Speed:"速度","Video load failed":"视频加载失败","Switching to":"正在切换至","Switched to":"已经切换至",quality:"画质",FF:"快进",REW:"快退","Default view":"默认视图","Theater mode":"影院模式","Full screen":"全屏","Exit full screen":"退出全屏",s:"秒",Volume:"音量","Video info":"视频统计信息"}};t.default=function(e){var t=this;this.lang=e,this.tran=function(e){return i[t.lang]&&i[t.lang][e]?i[t.lang][e]:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=o(n(2)),r=o(n(28));function o(e){return e&&e.__esModule?e:{default:e}}var l=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e.container,this.options=e.options,this.index=e.index,this.tran=e.tran,this.init()}return i(t,[{key:"init",value:function(){this.container.innerHTML=(0,r.default)({options:this.options,index:this.index,tran:this.tran,icons:a.default,video:{current:!0,pic:this.options.video.pic,preload:this.options.preload,url:this.options.video.url}}),this.volumeBar=this.container.querySelector(".y-player-volume-bar-inner"),this.volumeBarWrap=this.container.querySelector(".y-player-volume-bar"),this.volumeBarWrapWrap=this.container.querySelector(".y-player-volume-bar-wrap"),this.volumeButton=this.container.querySelector(".y-player-volume"),this.volumeButtonIcon=this.container.querySelector(".y-player-volume-icon"),this.volumeIcon=this.container.querySelector(".y-player-volume-icon .y-player-icon-content"),this.playedBar=this.container.querySelector(".y-player-played"),this.loadedBar=this.container.querySelector(".y-player-loaded"),this.playedBarWrap=this.container.querySelector(".y-player-bar-wrap"),this.playedBarTime=this.container.querySelector(".y-player-bar-time"),this.video=this.container.querySelector(".y-player-video-current"),this.bezel=this.container.querySelector(".y-player-bezel-icon"),this.playButton=this.container.querySelector(".y-player-play-icon"),this.videoWrap=this.container.querySelector(".y-player-video-wrap"),this.controllerMask=this.container.querySelector(".y-player-controller-mask"),this.ptime=this.container.querySelector(".y-player-ptime"),this.mask=this.container.querySelector(".y-player-mask"),this.dtime=this.container.querySelector(".y-player-dtime"),this.controller=this.container.querySelector(".y-player-controller"),this.theaterButton=this.container.querySelector(".y-player-theater-icon"),this.theaterOffButton=this.container.querySelector(".y-player-theater-off-icon"),this.fullButton=this.container.querySelector(".y-player-full-icon"),this.fullOffButton=this.container.querySelector(".y-player-full-off-icon"),this.menu=this.container.querySelector(".y-player-menu"),this.menuItem=this.container.querySelectorAll(".y-player-menu-item"),this.speedList=this.container.querySelector(".y-player-speed-list"),this.speedButton=this.container.querySelector(".y-player-speed-icon"),this.qualityList=this.container.querySelector(".y-player-quality-list"),this.qualityButton=this.container.querySelector(".y-player-quality-icon"),this.barPreview=this.container.querySelector(".y-player-bar-preview"),this.barWrap=this.container.querySelector(".y-player-bar-wrap"),this.notice=this.container.querySelector(".y-player-notice"),this.infoPanel=this.container.querySelector(".y-player-info-panel"),this.infoPanelClose=this.container.querySelector(".y-player-info-panel-close"),this.infoVersion=this.container.querySelector(".y-player-info-panel-item-version .y-player-info-panel-item-data"),this.infoFPS=this.container.querySelector(".y-player-info-panel-item-fps .y-player-info-panel-item-data"),this.infoType=this.container.querySelector(".y-player-info-panel-item-type .y-player-info-panel-item-data"),this.infoUrl=this.container.querySelector(".y-player-info-panel-item-url .y-player-info-panel-item-data"),this.infoResolution=this.container.querySelector(".y-player-info-panel-item-resolution .y-player-info-panel-item-data"),this.infoDuration=this.container.querySelector(".y-player-info-panel-item-duration .y-player-info-panel-item-data")}}]),t}();t.default=l},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm-16 328c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16v160zm112 0c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16v160z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M215.03 72.04L126.06 161H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V89.02c0-21.47-25.96-31.98-40.97-16.98zm123.2 108.08c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 229.28 336 242.62 336 257c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.87z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 257.33 512"><path d="M216.36 71.04L127.39 160H25.33c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.47-25.96-31.98-40.97-16.98z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M592 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h245.1v32h-160c-17.7 0-32 14.3-32 32s14.3 32 32 32h384c17.7 0 32-14.3 32-32s-14.3-32-32-32h-160v-32H592c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h512v288z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-6 400H54c-3.3 0-6-2.7-6-6V86c0-3.3 2.7-6 6-6h340c3.3 0 6 2.7 6 6v340c0 3.3-2.7 6-6 6z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z"></path></svg>'},function(e,t){e.exports='<svg version="1.1" viewBox="0 0 22 22"><svg x="7" y="1"><circle class="y-player-loading-dot y-player-loading-dot-0" cx="4" cy="4" r="2"></circle></svg><svg x="11" y="3"><circle class="y-player-loading-dot y-player-loading-dot-1" cx="4" cy="4" r="2"></circle></svg><svg x="13" y="7"><circle class="y-player-loading-dot y-player-loading-dot-2" cx="4" cy="4" r="2"></circle></svg><svg x="11" y="11"><circle class="y-player-loading-dot y-player-loading-dot-3" cx="4" cy="4" r="2"></circle></svg><svg x="7" y="13"><circle class="y-player-loading-dot y-player-loading-dot-4" cx="4" cy="4" r="2"></circle></svg><svg x="3" y="11"><circle class="y-player-loading-dot y-player-loading-dot-5" cx="4" cy="4" r="2"></circle></svg><svg x="1" y="7"><circle class="y-player-loading-dot y-player-loading-dot-6" cx="4" cy="4" r="2"></circle></svg><svg x="3" y="3"><circle class="y-player-loading-dot y-player-loading-dot-7" cx="4" cy="4" r="2"></circle></svg></svg>'},function(e,t,c){var u=c(3);e.exports=function(e){"use strict";e=e||{};var t,n="",i=(arguments[1],e.video),a=e.options,r=u.$escape,o=e.icons,l=u.$each,s=(e.$value,e.$index,e.tran);return n+='<div class="y-player-mask"></div>\n<div class="y-player-video-wrap">\n    ',t=c(4)(i),n+=t,n+="\n    ",a.logo&&(n+='<div class="y-player-logo"><img src="',n+=r(a.logo),n+='"></div>'),n+='\n    <div class="y-player-bezel">\n        <span class="y-player-bezel-icon"></span>\n        <span class="y-player-loading-icon">',n+=o.loading,n+='</span>\n    </div>\n</div>\n<div class="y-player-controller-mask"></div>\n<div class="y-player-controller">\n    <div class="y-player-icons y-player-icons-left">\n        <button class="y-player-icon y-player-play-icon">\n            <span class="y-player-icon-content">',n+=o.play,n+='</span>\n        </button>\n        <div class="y-player-volume">\n            <button class="y-player-icon y-player-volume-icon">\n                <span class="y-player-icon-content">',n+=o.volumeDown,n+='</span>\n            </button>\n            <div class="y-player-volume-bar-wrap" data-balloon-pos="up">\n                <div class="y-player-volume-bar">\n                    <div class="y-player-volume-bar-inner" style="background: ',n+=r(a.theme.volume),n+=';">\n                        <span class="y-player-thumb" style="background: ',n+=r(a.theme.volume),n+='"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <span class="y-player-time">\n            <span class="y-player-ptime">00:00</span> / <span class="y-player-dtime">00:00</span>\n        </span>\n    </div>\n    <div class="y-player-icons y-player-icons-right">\n        ',a.video.quality&&(n+='<div class="y-player-quality">\n            <button class="y-player-icon y-player-quality-icon">',n+=r(a.video.quality[a.video.defaultQuality].name),n+='</button>\n            <div class="y-player-quality-mask">\n                <div class="y-player-quality-list">\n                    ',l(a.video.quality,function(e,t){n+='<div class="y-player-quality-item" data-index="',n+=r(t),n+='">',n+=r(e.name),n+="</div>"}),n+="\n                </div>\n            </div>\n        </div>"),n+='\n        <div class="y-player-speed">\n            <button class="y-player-icon y-player-speed-icon" data-balloon="',n+=r(s("Speed")),n+='" data-balloon-pos="up">1&times;</button>\n            <div class="y-player-speed-mask">\n                <div class="y-player-speed-list">\n                    ',l(a.speed,function(e,t){n+='<div class="y-player-speed-item" data-speed="',n+=r(e),n+='">',n+=r(e),n+="&times;</div>"}),n+='\n                </div>\n            </div>\n        </div>\n        <div class="y-player-theater">\n            <button class="y-player-icon y-player-theater-icon" data-balloon="',n+=r(s("Theater mode")),n+='" data-balloon-pos="up">\n                <span class="y-player-icon-content">',n+=o.theaterMode,n+='</span>\n            </button>\n            <button class="y-player-icon y-player-theater-off-icon" data-balloon="',n+=r(s("Default view")),n+='" data-balloon-pos="up">\n                <span class="y-player-icon-content">',n+=o.defaultView,n+='</span>\n            </button>\n        </div>\n        <div class="y-player-full">\n            <button class="y-player-icon y-player-full-icon" data-balloon="',n+=r(s("Full screen")),n+='" data-balloon-pos="up">\n                <span class="y-player-icon-content">',n+=o.fullScreen,n+='</span>\n            </button>\n            <button class="y-player-icon y-player-full-off-icon" data-balloon="',n+=r(s("Exit full screen")),n+='" data-balloon-pos="up">\n                <span class="y-player-icon-content">',n+=o.exitFullScreen,n+='</span>\n            </button>\n        </div>\n    </div>\n    <div class="y-player-bar-wrap">\n        <div class="y-player-bar-time hidden">00:00</div>\n        <div class="y-player-bar-preview"></div>\n        <div class="y-player-bar">\n            <div class="y-player-loaded" style="width: 0;"></div>\n            <div class="y-player-played" style="width: 0; background: ',n+=r(a.theme.bar),n+='">\n                <span class="y-player-thumb" style="background: ',n+=r(a.theme.bar),n+='"></span>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="y-player-info-panel y-player-info-panel-hide">\n    <div class="y-player-info-panel-close">[&times;]</div>\n    <div class="y-player-info-panel-item y-player-info-panel-item-version">\n        <span class="y-player-info-panel-item-title">Player version</span>\n        <span class="y-player-info-panel-item-data"></span>\n    </div>\n    <div class="y-player-info-panel-item y-player-info-panel-item-fps">\n        <span class="y-player-info-panel-item-title">Player FPS</span>\n        <span class="y-player-info-panel-item-data"></span>\n    </div>\n    <div class="y-player-info-panel-item y-player-info-panel-item-type">\n        <span class="y-player-info-panel-item-title">Video type</span>\n        <span class="y-player-info-panel-item-data"></span>\n    </div>\n    <div class="y-player-info-panel-item y-player-info-panel-item-url">\n        <span class="y-player-info-panel-item-title">Video url</span>\n        <span class="y-player-info-panel-item-data"></span>\n    </div>\n    <div class="y-player-info-panel-item y-player-info-panel-item-resolution">\n        <span class="y-player-info-panel-item-title">Video resolution</span>\n        <span class="y-player-info-panel-item-data"></span>\n    </div>\n    <div class="y-player-info-panel-item y-player-info-panel-item-duration">\n        <span class="y-player-info-panel-item-title">Video duration</span>\n        <span class="y-player-info-panel-item-data"></span>\n    </div>\n</div>\n<div class="y-player-menu">\n    ',l(a.contextmenu,function(e,t){n+='<div class="y-player-menu-item"><a',e.link&&(n+=' target="_blank"'),n+=' href="',n+=r(e.link||"javascript:void(0);"),n+='">',n+=r(s(e.text)),n+="</a></div>"}),n+='\n</div>\n<div class="y-player-notice"></div>'}},function(i,e,a){"use strict";(function(e){var t=a(30),n=Object.create(t?e:window),l=/["&'<>]/;n.$escape=function(e){return function(e){var t=""+e,n=l.exec(t);if(!n)return e;var i="",a=void 0,r=void 0,o=void 0;for(a=n.index,r=0;a<t.length;a++){switch(t.charCodeAt(a)){case 34:o="&#34;";break;case 38:o="&#38;";break;case 39:o="&#39;";break;case 60:o="&#60;";break;case 62:o="&#62;";break;default:continue}r!==a&&(i+=t.substring(r,a)),r=a+1,i+=o}return r!==a?i+t.substring(r,a):i}(function e(t){"string"!=typeof t&&(t=null==t?"":"function"==typeof t?e(t.call(t)):JSON.stringify(t));return t}(e))},n.$each=function(e,t){if(Array.isArray(e))for(var n=0,i=e.length;n<i;n++)t(e[n],n);else for(var a in e)t(e[a],a)},i.exports=n}).call(this,a(1))},function(e,t,n){"use strict";e.exports=!1},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events={},this.videoEvents=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","mozaudioavailable","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],this.playerEvents=["thumbnails_show","thumbnails_hide","contextmenu_show","contextmenu_hide","notice_show","notice_hide","quality_start","quality_end","destroy","resize","theatermode","theatermode_cancel","fullscreen","fullscreen_cancel"]}return i(e,[{key:"on",value:function(e,t){this.type(e)&&"function"==typeof t&&(this.events[e]||(this.events[e]=[]),this.events[e].push(t))}},{key:"trigger",value:function(e,t){if(this.events[e]&&this.events[e].length)for(var n=0;n<this.events[e].length;n++)this.events[e][n](t)}},{key:"type",value:function(e){return-1!==this.playerEvents.indexOf(e)?"player":-1!==this.videoEvents.indexOf(e)?"video":(console.error("Unknown event name: "+e),null)}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=n(0),o=(i=r)&&i.__esModule?i:{default:i};var l=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.storageName={volume:"y-player-volume"},this.default={volume:e.options.hasOwnProperty("volume")?e.options.volume:.5},this.data={},this.init()}return a(t,[{key:"init",value:function(){for(var e in this.storageName){var t=this.storageName[e];this.data[e]=parseFloat(o.default.storage.get(t)||this.default[e])}}},{key:"get",value:function(e){return this.data[e]}},{key:"set",value:function(e,t){this.data[e]=t,o.default.storage.set(this.storageName[e],t)}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var a=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.elements={},this.elements.volume=e.volumeBar,this.elements.played=e.playedBar,this.elements.loaded=e.loadedBar}return i(t,[{key:"set",value:function(e,t,n){t=Math.max(t,0),t=Math.min(t,1),this.elements[e].style[n]=100*t+"%"}},{key:"get",value:function(e){return parseFloat(this.elements[e].style.width)/100}}]),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var a=function(){function n(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.container=e,this.container.addEventListener("animationend",function(){t.container.classList.remove("y-player-bezel-transition")})}return i(n,[{key:"switch",value:function(e){this.container.innerHTML=e,this.container.classList.add("y-player-bezel-transition")}}]),n}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=n(0),o=(i=a)&&i.__esModule?i:{default:i};var l=function(){function a(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.player=e,this.player.events.on("theatermode",function(){t.player.resize()}),this.player.events.on("theatermode_cancel",function(){t.player.resize(),o.default.setScrollPosition(t.lastScrollPosition)});var n=function(){t.player.resize(),t.isFullScreen("full")?t.player.events.trigger("fullscreen"):(o.default.setScrollPosition(t.lastScrollPosition),t.player.events.trigger("fullscreen_cancel"))},i=function(){var e=document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;e&&e!==t.player.container||(t.player.resize(),e?t.player.events.trigger("fullscreen"):(o.default.setScrollPosition(t.lastScrollPosition),t.player.events.trigger("fullscreen_cancel")))};/Firefox/.test(navigator.userAgent)?(document.addEventListener("mozfullscreenchange",i),document.addEventListener("fullscreenchange",i)):(this.player.container.addEventListener("fullscreenchange",n),this.player.container.addEventListener("webkitfullscreenchange",n),document.addEventListener("msfullscreenchange",i),document.addEventListener("MSFullscreenChange",i))}return r(a,[{key:"isFullScreen",value:function(){switch(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"full"){case"full":return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;case"theater":return this.player.container.classList.contains("y-player-theater-mode")}}},{key:"request",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"full",t="full"===e?"theater":"full",n=this.isFullScreen(t);switch(n||(this.lastScrollPosition=o.default.getScrollPosition()),e){case"full":this.player.container.classList.add("y-player-full-screen"),this.player.container.requestFullscreen?this.player.container.requestFullscreen():this.player.container.mozRequestFullScreen?this.player.container.mozRequestFullScreen():this.player.container.webkitRequestFullscreen?this.player.container.webkitRequestFullscreen():this.player.video.webkitEnterFullscreen?this.player.video.webkitEnterFullscreen():this.player.video.webkitEnterFullScreen?this.player.video.webkitEnterFullScreen():this.player.container.msRequestFullscreen&&this.player.container.msRequestFullscreen();break;case"theater":this.player.container.classList.add("y-player-theater-mode"),document.body.classList.add("y-player-theater-mode-fix"),this.player.events.trigger("theatermode")}n&&this.cancel(t)}},{key:"cancel",value:function(){switch(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"full"){case"full":this.player.container.classList.remove("y-player-full-screen"),document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.webkitCancelFullscreen?document.webkitCancelFullscreen():document.msCancelFullScreen?document.msCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen();break;case"theater":this.player.container.classList.remove("y-player-theater-mode"),document.body.classList.remove("y-player-theater-mode-fix"),this.player.events.trigger("theatermode_cancel")}}},{key:"toggle",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"full";this.isFullScreen(e)?this.cancel(e):this.request(e)}}]),a}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=l(n(0)),a=l(n(37)),o=l(n(2));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(){function n(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.player=e,this.autoHideTimer=0,r.default.isMobile||(this.player.container.addEventListener("mousemove",function(){t.setAutoHide()}),this.player.container.addEventListener("click",function(){t.setAutoHide()}),this.player.on("play",function(){t.setAutoHide()}),this.player.on("pause",function(){t.setAutoHide()})),this.initPlayButton(),this.initHighlights(),this.initThumbnails(),this.initPlayedBar(),r.default.isMobile||this.initVolumeButton(),this.initQualityButton(),this.initSpeedButton(),this.initFullScreenButton()}return i(n,[{key:"initPlayButton",value:function(){var e=this;this.player.template.playButton.addEventListener("click",function(){e.player.toggle()}),r.default.isMobile?(this.player.template.videoWrap.addEventListener("click",function(){e.toggle()}),this.player.template.controllerMask.addEventListener("click",function(){e.toggle()})):(this.player.template.videoWrap.addEventListener("click",function(){e.player.toggle()}),this.player.template.controllerMask.addEventListener("click",function(){e.player.toggle()}))}},{key:"initHighlights",value:function(){var i=this;this.player.on("durationchange",function(){if(1!==i.player.video.duration&&i.player.video.duration!==1/0&&i.player.options.highlight){var e=document.querySelectorAll(".y-player-highlight");[].slice.call(e,0).forEach(function(e){i.player.template.playedBarWrap.removeChild(e)});for(var t=0;t<i.player.options.highlight.length;t++)if(i.player.options.highlight[t].text&&i.player.options.highlight[t].time){var n=document.createElement("div");n.classList.add("y-player-highlight"),n.style.left=i.player.options.highlight[t].time/i.player.video.duration*100+"%",n.innerHTML='<span class="y-player-highlight-text">'+i.player.options.highlight[t].text+"</span>",i.player.template.playedBarWrap.insertBefore(n,i.player.template.playedBarTime)}}})}},{key:"initThumbnails",value:function(){var e=this;this.player.options.video.thumbnails&&(this.thumbnails=new a.default({container:this.player.template.barPreview,barWidth:this.player.template.barWrap.offsetWidth,url:this.player.options.video.thumbnails,events:this.player.events}),this.player.on("loadedmetadata",function(){e.thumbnails.resize(160,e.player.video.videoHeight/e.player.video.videoWidth*160)}))}},{key:"initPlayedBar",value:function(){var a=this,i=function(e){var t=((e.clientX||e.changedTouches[0].clientX)-r.default.getBoundingClientRectViewLeft(a.player.template.playedBarWrap))/a.player.template.playedBarWrap.clientWidth;t=Math.max(t,0),t=Math.min(t,1),a.player.bar.set("played",t,"width"),a.player.template.ptime.innerHTML=r.default.secondToTime(t*a.player.video.duration)},e=function e(t){document.removeEventListener(r.default.nameMap.dragEnd,e),document.removeEventListener(r.default.nameMap.dragMove,i);var n=((t.clientX||t.changedTouches[0].clientX)-r.default.getBoundingClientRectViewLeft(a.player.template.playedBarWrap))/a.player.template.playedBarWrap.clientWidth;n=Math.max(n,0),n=Math.min(n,1),a.player.bar.set("played",n,"width"),a.player.seek(a.player.bar.get("played")*a.player.video.duration),a.player.timer.enable("progress")};this.player.template.playedBarWrap.addEventListener(r.default.nameMap.dragStart,function(){a.player.timer.disable("progress"),document.addEventListener(r.default.nameMap.dragMove,i),document.addEventListener(r.default.nameMap.dragEnd,e)}),this.player.template.playedBarWrap.addEventListener(r.default.nameMap.dragMove,function(e){if(a.player.video.duration){var t=r.default.cumulativeOffset(a.player.template.playedBarWrap).left,n=(e.clientX||e.changedTouches[0].clientX)-t;if(n<0||n>a.player.template.playedBarWrap.offsetWidth)return;var i=a.player.video.duration*(n/a.player.template.playedBarWrap.offsetWidth);r.default.isMobile&&a.thumbnails&&a.thumbnails.show(),a.thumbnails&&a.thumbnails.move(n),a.player.template.playedBarTime.style.left=n-(3600<=i?25:20)+"px",a.player.template.playedBarTime.innerText=r.default.secondToTime(i),a.player.template.playedBarTime.classList.remove("hidden")}}),this.player.template.playedBarWrap.addEventListener(r.default.nameMap.dragEnd,function(){r.default.isMobile&&a.thumbnails&&a.thumbnails.hide()}),r.default.isMobile||(this.player.template.playedBarWrap.addEventListener("mouseenter",function(){a.player.video.duration&&(a.thumbnails&&a.thumbnails.show(),a.player.template.playedBarTime.classList.remove("hidden"))}),this.player.template.playedBarWrap.addEventListener("mouseleave",function(){a.player.video.duration&&(a.thumbnails&&a.thumbnails.hide(),a.player.template.playedBarTime.classList.add("hidden"))}))}},{key:"initVolumeButton",value:function(){var i=this,t=function(e){var t=e||window.event,n=((t.clientX||t.changedTouches[0].clientX)-r.default.getBoundingClientRectViewLeft(i.player.template.volumeBarWrap)-5.5)/35;i.player.volume(n)},e=function e(){document.removeEventListener(r.default.nameMap.dragEnd,e),document.removeEventListener(r.default.nameMap.dragMove,t),i.player.template.volumeButton.classList.remove("y-player-volume-active")};this.player.template.volumeBarWrapWrap.addEventListener("click",function(e){var t=e||window.event,n=((t.clientX||t.changedTouches[0].clientX)-r.default.getBoundingClientRectViewLeft(i.player.template.volumeBarWrap)-5.5)/35;i.player.volume(n)}),this.player.template.volumeBarWrapWrap.addEventListener(r.default.nameMap.dragStart,function(){document.addEventListener(r.default.nameMap.dragMove,t),document.addEventListener(r.default.nameMap.dragEnd,e),i.player.template.volumeButton.classList.add("y-player-volume-active")}),this.player.template.volumeButtonIcon.addEventListener("click",function(){i.player.video.muted?(i.player.video.muted=!1,i.player.switchVolumeIcon(),i.player.bar.set("volume",i.player.volume(),"width")):(i.player.video.muted=!0,i.player.template.volumeIcon.innerHTML=o.default.volumeOff,i.player.bar.set("volume",0,"width"))})}},{key:"initQualityButton",value:function(){var t=this;this.player.options.video.quality&&this.player.template.qualityList.addEventListener("click",function(e){e.target.classList.contains("y-player-quality-item")&&t.player.switchQuality(e.target.dataset.index)})}},{key:"initSpeedButton",value:function(){var t=this;this.player.template.speedList.addEventListener("click",function(e){e.target.classList.contains("y-player-speed-item")&&t.player.speed(e.target.dataset.speed)})}},{key:"initFullScreenButton",value:function(){var e=this;this.player.template.theaterButton.addEventListener("click",function(){e.player.fullScreen.toggle("theater")}),this.player.template.theaterOffButton.addEventListener("click",function(){e.player.fullScreen.toggle("theater")}),this.player.template.fullButton.addEventListener("click",function(){e.player.fullScreen.toggle("full")}),this.player.template.fullOffButton.addEventListener("click",function(){e.player.fullScreen.toggle("full")})}},{key:"setAutoHide",value:function(){var e=this;this.show(),clearTimeout(this.autoHideTimer),this.autoHideTimer=setTimeout(function(){!e.player.video.played.length||e.player.paused||e.disableAutoHide||e.hide()},3e3)}},{key:"show",value:function(){this.player.container.classList.remove("y-player-hide-controller")}},{key:"hide",value:function(){this.player.container.classList.add("y-player-hide-controller")}},{key:"isShow",value:function(){return!this.player.container.classList.contains("y-player-hide-controller")}},{key:"toggle",value:function(){this.isShow()?this.hide():this.show()}},{key:"destroy",value:function(){clearTimeout(this.autoHideTimer)}}]),n}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var a=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e.container,this.barWidth=e.barWidth,this.container.style.backgroundImage="url('"+e.url+"')",this.events=e.events}return i(t,[{key:"resize",value:function(e,t){this.container.style.width=e+"px",this.container.style.height=t+"px",this.container.style.top=2-t+"px"}},{key:"show",value:function(){this.container.style.display="block",this.events&&this.events.trigger("thumbnails_show")}},{key:"move",value:function(e){this.container.style.backgroundPosition="-"+160*(Math.ceil(e/this.barWidth*100)-1)+"px 0",this.container.style.left=Math.min(Math.max(e-this.container.offsetWidth/2,-10),this.barWidth-150)+"px"}},{key:"hide",value:function(){this.container.style.display="none",this.events&&this.events.trigger("thumbnails_hide")}}]),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var a=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},this.types=["loading","info","fps"],this.init()}return i(t,[{key:"init",value:function(){var t=this;this.types.map(function(e){return"fps"!==e&&t["init"+e+"Checker"](),e})}},{key:"initloadingChecker",value:function(){var e=this,t=0,n=0,i=!1;this.loadingChecker=setInterval(function(){e.enableloadingChecker&&(n=e.player.video.currentTime,i||n!==t||e.player.video.paused||(e.player.container.classList.add("y-player-loading"),i=!0),i&&t<n&&!e.player.video.paused&&(e.player.container.classList.remove("y-player-loading"),i=!1),t=n)},100)}},{key:"initfpsChecker",value:function(){var t=this;window.requestAnimationFrame(function(){if(t.enablefpsChecker)if(t.initfpsChecker(),t.fpsStart){t.fpsIndex++;var e=new Date;1e3<e-t.fpsStart&&(t.player.infoPanel.fps(t.fpsIndex/(e-t.fpsStart)*1e3),t.fpsStart=new Date,t.fpsIndex=0)}else t.fpsStart=new Date,t.fpsIndex=0;else t.fpsStart=0,t.fpsIndex=0})}},{key:"initinfoChecker",value:function(){var e=this;this.infoChecker=setInterval(function(){e.enableinfoChecker&&e.player.infoPanel.update()},1e3)}},{key:"enable",value:function(e){this["enable"+e+"Checker"]=!0,"fps"===e&&this.initfpsChecker()}},{key:"disable",value:function(e){this["enable"+e+"Checker"]=!1}},{key:"destroy",value:function(){var t=this;this.types.map(function(e){return t["enable"+e+"Checker"]=!1,t[e+"Checker"]&&clearInterval(t[e+"Checker"]),e})}}]),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r.options.hotkey&&document.addEventListener("keydown",function(e){if(r.focus){var t=document.activeElement.tagName.toUpperCase(),n=document.activeElement.getAttribute("contenteditable");if("INPUT"!==t&&"TEXTAREA"!==t&&""!==n&&"true"!==n){var i=e||window.event,a=void 0;switch(i.keyCode){case 32:i.preventDefault(),r.toggle();break;case 37:i.preventDefault(),r.seek(r.video.currentTime-5),r.controller.setAutoHide();break;case 39:i.preventDefault(),r.seek(r.video.currentTime+5),r.controller.setAutoHide();break;case 38:i.preventDefault(),a=r.volume()+.1,r.volume(a);break;case 40:i.preventDefault(),a=r.volume()-.1,r.volume(a)}}}}),document.addEventListener("keydown",function(e){switch((e||window.event).keyCode){case 27:r.fullScreen.isFullScreen("web")&&r.fullScreen.cancel("web")}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var a=function(){function t(e){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.shown=!1,Array.prototype.slice.call(this.player.template.menuItem).forEach(function(e,t){i.player.options.contextmenu[t].click&&e.addEventListener("click",function(){i.player.options.contextmenu[t].click(i.player),i.hide()})}),this.player.container.addEventListener("contextmenu",function(e){if(i.shown)i.hide();else{var t=e||window.event;t.preventDefault();var n=i.player.container.getBoundingClientRect();i.show(t.clientX-n.left,t.clientY-n.top),i.player.template.mask.addEventListener("click",function(){i.hide()})}})}return i(t,[{key:"show",value:function(e,t){this.player.template.menu.classList.add("y-player-menu-show");var n=this.player.container.getBoundingClientRect();e+this.player.template.menu.offsetWidth>=n.width?(this.player.template.menu.style.right=n.width-e+"px",this.player.template.menu.style.left="initial"):(this.player.template.menu.style.left=e+"px",this.player.template.menu.style.right="initial"),t+this.player.template.menu.offsetHeight>=n.height?(this.player.template.menu.style.bottom=n.height-t+"px",this.player.template.menu.style.top="initial"):(this.player.template.menu.style.top=t+"px",this.player.template.menu.style.bottom="initial"),this.player.template.mask.classList.add("y-player-mask-show"),this.shown=!0,this.player.events.trigger("contextmenu_show")}},{key:"hide",value:function(){this.player.template.mask.classList.remove("y-player-mask-show"),this.player.template.menu.classList.remove("y-player-menu-show"),this.shown=!1,this.player.events.trigger("contextmenu_hide")}}]),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var a=function(){function n(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.container=e.template.infoPanel,this.template=e.template,this.video=e.video,this.player=e,this.template.infoPanelClose.addEventListener("click",function(){t.hide()})}return i(n,[{key:"show",value:function(){this.beginTime=Date.now(),this.update(),this.player.timer.enable("info"),this.player.timer.enable("fps"),this.container.classList.remove("y-player-info-panel-hide")}},{key:"hide",value:function(){this.player.timer.disable("info"),this.player.timer.disable("fps"),this.container.classList.add("y-player-info-panel-hide")}},{key:"trigger",value:function(){this.container.classList.contains("y-player-info-panel-hide")?this.show():this.hide()}},{key:"update",value:function(){this.template.infoVersion.innerHTML="v1.0.0 711da65",this.template.infoType.innerHTML=this.player.type,this.template.infoUrl.innerHTML=this.player.options.video.url,this.template.infoResolution.innerHTML=this.player.video.videoWidth+" x "+this.player.video.videoHeight,this.template.infoDuration.innerHTML=this.player.video.duration}},{key:"fps",value:function(e){this.template.infoFPS.innerHTML=""+e.toFixed(1)}}]),n}();t.default=a}]).default});